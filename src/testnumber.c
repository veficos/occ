

#include "config.h"
#include "unittest.h"
#include "diag.h"
#include "option.h"
#include "number.h"
#include "token.h"

#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <assert.h>


#define EXCEPT_INTEGER_EQ(tok, expect, num)                                                 \
    do {                                                                                    \
        (tok)->cs = cstring_cpy_n((tok)->cs, num, strlen(num));                             \
        TEST_COND(num, parse_number(diag, &option, tok)== true && tok->number.ul == expect);\
    } while(0)

#define EXCEPT_INTEGER_NEQ(tok, expect, num)                                                \
    do {                                                                                    \
        (tok)->cs = cstring_cpy_n((tok)->cs, num, strlen(num));                             \
        TEST_COND(num, !parse_number(diag, &option, tok));                                  \
    } while(0)

#define EXCEPT_HEX_CONST(except)    \
    EXCEPT_INTEGER_EQ(tok, except, #except)

#define EXCEPT_BIN_CONST(except)    \
    EXCEPT_INTEGER_EQ(tok, except, #except)

#define CHECK_DEC_CONST(except)    \
    EXCEPT_INTEGER_EQ(tok, except, #except)

#define CHECK_HEX_CONST(C)			\
	EXCEPT_HEX_CONST(0x##C)

#define CHECK_OCT_CONST(C)          \
    EXCEPT_INTEGER_EQ(tok, C, #C)

#define CHECK_BIN_CONST(C)          \
    EXCEPT_BIN_CONST(0b##C)

#define CHECK_DEP_CONST(except, num) \
    EXCEPT_INTEGER_EQ(tok, except, num)


static
void test_number1()
{
    diag_t diag;
    struct option_s option;
    token_t tok;

    diag = diag_create();
    tok = token_create();

    tok->type = TOKEN_NUMBER;

    CHECK_DEC_CONST(1);
    CHECK_DEC_CONST(2);
    CHECK_DEC_CONST(3);
    CHECK_DEC_CONST(4);
    CHECK_DEC_CONST(7);
    CHECK_DEC_CONST(8);
    CHECK_DEC_CONST(15);
    CHECK_DEC_CONST(16);
    CHECK_DEC_CONST(31);
    CHECK_DEC_CONST(32);
    CHECK_DEC_CONST(63);
    CHECK_DEC_CONST(64);
    CHECK_DEC_CONST(127);
    CHECK_DEC_CONST(128);
    CHECK_DEC_CONST(255);
    CHECK_DEC_CONST(256);
    CHECK_DEC_CONST(511);
    CHECK_DEC_CONST(512);
    CHECK_DEC_CONST(1023);
    CHECK_DEC_CONST(1024);
    CHECK_DEC_CONST(2047);
    CHECK_DEC_CONST(2048);
    CHECK_DEC_CONST(4095);
    CHECK_DEC_CONST(4096);
    CHECK_DEC_CONST(8191);
    CHECK_DEC_CONST(8192);
    CHECK_DEC_CONST(16383);
    CHECK_DEC_CONST(16384);
    CHECK_DEC_CONST(32767);
    CHECK_DEC_CONST(32768);
    CHECK_DEC_CONST(65535);
    CHECK_DEC_CONST(65536);
    CHECK_DEC_CONST(131071);
    CHECK_DEC_CONST(131072);
    CHECK_DEC_CONST(262143);
    CHECK_DEC_CONST(262144);
    CHECK_DEC_CONST(524287);
    CHECK_DEC_CONST(524288);
    CHECK_DEC_CONST(1048575);
    CHECK_DEC_CONST(1048576);
    CHECK_DEC_CONST(2097151);
    CHECK_DEC_CONST(2097152);
    CHECK_DEC_CONST(4194303);
    CHECK_DEC_CONST(4194304);
    CHECK_DEC_CONST(8388607);
    CHECK_DEC_CONST(8388608);
    CHECK_DEC_CONST(16777215);
    CHECK_DEC_CONST(16777216);
    CHECK_DEC_CONST(33554431);
    CHECK_DEC_CONST(33554432);
    CHECK_DEC_CONST(67108863);
    CHECK_DEC_CONST(67108864);
    CHECK_DEC_CONST(134217727);
    CHECK_DEC_CONST(134217728);
    CHECK_DEC_CONST(268435455);
    CHECK_DEC_CONST(268435456);
    CHECK_DEC_CONST(536870911);
    CHECK_DEC_CONST(536870912);
    CHECK_DEC_CONST(1073741823);
    CHECK_DEC_CONST(1073741824);
    CHECK_DEC_CONST(2147483647);
    CHECK_DEC_CONST(2147483648);
    CHECK_DEC_CONST(4294967295);
    CHECK_DEC_CONST(4294967296);
    CHECK_DEC_CONST(8589934591);
    CHECK_DEC_CONST(8589934592);
    CHECK_DEC_CONST(17179869183);
    CHECK_DEC_CONST(17179869184);
    CHECK_DEC_CONST(34359738367);
    CHECK_DEC_CONST(34359738368);
    CHECK_DEC_CONST(68719476735);
    CHECK_DEC_CONST(68719476736);
    CHECK_DEC_CONST(137438953471);
    CHECK_DEC_CONST(137438953472);
    CHECK_DEC_CONST(274877906943);
    CHECK_DEC_CONST(274877906944);
    CHECK_DEC_CONST(549755813887);
    CHECK_DEC_CONST(549755813888);
    CHECK_DEC_CONST(1099511627775);
    CHECK_DEC_CONST(1099511627776);
    CHECK_DEC_CONST(2199023255551);
    CHECK_DEC_CONST(2199023255552);
    CHECK_DEC_CONST(4398046511103);
    CHECK_DEC_CONST(4398046511104);
    CHECK_DEC_CONST(8796093022207);
    CHECK_DEC_CONST(8796093022208);
    CHECK_DEC_CONST(17592186044415);
    CHECK_DEC_CONST(17592186044416);
    CHECK_DEC_CONST(35184372088831);
    CHECK_DEC_CONST(35184372088832);
    CHECK_DEC_CONST(70368744177663);
    CHECK_DEC_CONST(70368744177664);
    CHECK_DEC_CONST(140737488355327);
    CHECK_DEC_CONST(140737488355328);
    CHECK_DEC_CONST(281474976710655);
    CHECK_DEC_CONST(281474976710656);
    CHECK_DEC_CONST(562949953421311);
    CHECK_DEC_CONST(562949953421312);
    CHECK_DEC_CONST(1125899906842623);
    CHECK_DEC_CONST(1125899906842624);
    CHECK_DEC_CONST(2251799813685247);
    CHECK_DEC_CONST(2251799813685248);
    CHECK_DEC_CONST(4503599627370495);
    CHECK_DEC_CONST(4503599627370496);
    CHECK_DEC_CONST(9007199254740991);
    CHECK_DEC_CONST(9007199254740992);
    CHECK_DEC_CONST(18014398509481983);
    CHECK_DEC_CONST(18014398509481984);
    CHECK_DEC_CONST(36028797018963967);
    CHECK_DEC_CONST(36028797018963968);
    CHECK_DEC_CONST(72057594037927935);
    CHECK_DEC_CONST(72057594037927936);
    CHECK_DEC_CONST(144115188075855871);
    CHECK_DEC_CONST(144115188075855872);
    CHECK_DEC_CONST(288230376151711743);
    CHECK_DEC_CONST(288230376151711744);
    CHECK_DEC_CONST(576460752303423487);
    CHECK_DEC_CONST(576460752303423488);
    CHECK_DEC_CONST(1152921504606846975);
    CHECK_DEC_CONST(1152921504606846976);
    CHECK_DEC_CONST(2305843009213693951);
    CHECK_DEC_CONST(2305843009213693952);
    CHECK_DEC_CONST(4611686018427387903);
    CHECK_DEC_CONST(4611686018427387904);
    CHECK_DEC_CONST(9223372036854775807);

    CHECK_OCT_CONST(0);
    CHECK_HEX_CONST(0);
    CHECK_OCT_CONST(01);
    CHECK_HEX_CONST(1);
    CHECK_OCT_CONST(02);
    CHECK_HEX_CONST(2);
    CHECK_OCT_CONST(03);
    CHECK_HEX_CONST(3);
    CHECK_OCT_CONST(04);
    CHECK_HEX_CONST(4);
    CHECK_OCT_CONST(07);
    CHECK_HEX_CONST(7);
    CHECK_OCT_CONST(010);
    CHECK_HEX_CONST(8);
    CHECK_OCT_CONST(017);
    CHECK_HEX_CONST(f);
    CHECK_OCT_CONST(020);
    CHECK_HEX_CONST(10);
    CHECK_OCT_CONST(037);
    CHECK_HEX_CONST(1f);
    CHECK_OCT_CONST(040);
    CHECK_HEX_CONST(20);
    CHECK_OCT_CONST(077);
    CHECK_HEX_CONST(3f);
    CHECK_OCT_CONST(0100);
    CHECK_HEX_CONST(40);
    CHECK_OCT_CONST(0177);
    CHECK_HEX_CONST(7f);
    CHECK_OCT_CONST(0200);
    CHECK_HEX_CONST(80);
    CHECK_OCT_CONST(0377);
    CHECK_HEX_CONST(ff);
    CHECK_OCT_CONST(0400);
    CHECK_HEX_CONST(100);
    CHECK_OCT_CONST(0777);
    CHECK_HEX_CONST(1ff);
    CHECK_OCT_CONST(01000);
    CHECK_HEX_CONST(200);
    CHECK_OCT_CONST(01777);
    CHECK_HEX_CONST(3ff);
    CHECK_OCT_CONST(02000);
    CHECK_HEX_CONST(400);
    CHECK_OCT_CONST(03777);
    CHECK_HEX_CONST(7ff);
    CHECK_OCT_CONST(04000);
    CHECK_HEX_CONST(800);
    CHECK_OCT_CONST(07777);
    CHECK_HEX_CONST(fff);
    CHECK_OCT_CONST(010000);
    CHECK_HEX_CONST(1000);
    CHECK_OCT_CONST(017777);
    CHECK_HEX_CONST(1fff);
    CHECK_OCT_CONST(020000);
    CHECK_HEX_CONST(2000);
    CHECK_OCT_CONST(037777);
    CHECK_HEX_CONST(3fff);
    CHECK_OCT_CONST(040000);
    CHECK_HEX_CONST(4000);
    CHECK_OCT_CONST(077777);
    CHECK_HEX_CONST(7fff);
    CHECK_OCT_CONST(0100000);
    CHECK_HEX_CONST(8000);
    CHECK_OCT_CONST(0177777);
    CHECK_HEX_CONST(ffff);
    CHECK_OCT_CONST(0200000);
    CHECK_HEX_CONST(10000);
    CHECK_OCT_CONST(0377777);
    CHECK_HEX_CONST(1ffff);
    CHECK_OCT_CONST(0400000);
    CHECK_HEX_CONST(20000);
    CHECK_OCT_CONST(0777777);
    CHECK_HEX_CONST(3ffff);
    CHECK_OCT_CONST(01000000);
    CHECK_HEX_CONST(40000);
    CHECK_OCT_CONST(01777777);
    CHECK_HEX_CONST(7ffff);
    CHECK_OCT_CONST(02000000);
    CHECK_HEX_CONST(80000);
    CHECK_OCT_CONST(03777777);
    CHECK_HEX_CONST(fffff);
    CHECK_OCT_CONST(04000000);
    CHECK_HEX_CONST(100000);
    CHECK_OCT_CONST(07777777);
    CHECK_HEX_CONST(1fffff);
    CHECK_OCT_CONST(010000000);
    CHECK_HEX_CONST(200000);
    CHECK_OCT_CONST(017777777);
    CHECK_HEX_CONST(3fffff);
    CHECK_OCT_CONST(020000000);
    CHECK_HEX_CONST(400000);
    CHECK_OCT_CONST(037777777);
    CHECK_HEX_CONST(7fffff);
    CHECK_OCT_CONST(040000000);
    CHECK_HEX_CONST(800000);
    CHECK_OCT_CONST(077777777);
    CHECK_HEX_CONST(ffffff);
    CHECK_OCT_CONST(0100000000);
    CHECK_HEX_CONST(1000000);
    CHECK_OCT_CONST(0177777777);
    CHECK_HEX_CONST(1ffffff);
    CHECK_OCT_CONST(0200000000);
    CHECK_HEX_CONST(2000000);
    CHECK_OCT_CONST(0377777777);
    CHECK_HEX_CONST(3ffffff);
    CHECK_OCT_CONST(0400000000);
    CHECK_HEX_CONST(4000000);
    CHECK_OCT_CONST(0777777777);
    CHECK_HEX_CONST(7ffffff);
    CHECK_OCT_CONST(01000000000);
    CHECK_HEX_CONST(8000000);
    CHECK_OCT_CONST(01777777777);
    CHECK_HEX_CONST(fffffff);
    CHECK_OCT_CONST(02000000000);
    CHECK_HEX_CONST(10000000);
    CHECK_OCT_CONST(03777777777);
    CHECK_HEX_CONST(1fffffff);
    CHECK_OCT_CONST(04000000000);
    CHECK_HEX_CONST(20000000);
    CHECK_OCT_CONST(07777777777);
    CHECK_HEX_CONST(3fffffff);
    CHECK_OCT_CONST(010000000000);
    CHECK_HEX_CONST(40000000);
    CHECK_OCT_CONST(017777777777);
    CHECK_HEX_CONST(7fffffff);
    CHECK_OCT_CONST(020000000000);
    CHECK_HEX_CONST(80000000);
    CHECK_OCT_CONST(037777777777);
    CHECK_HEX_CONST(ffffffff);
    CHECK_OCT_CONST(040000000000);
    CHECK_HEX_CONST(100000000);
    CHECK_OCT_CONST(077777777777);
    CHECK_HEX_CONST(1ffffffff);
    CHECK_OCT_CONST(0100000000000);
    CHECK_HEX_CONST(200000000);
    CHECK_OCT_CONST(0177777777777);
    CHECK_HEX_CONST(3ffffffff);
    CHECK_OCT_CONST(0200000000000);
    CHECK_HEX_CONST(400000000);
    CHECK_OCT_CONST(0377777777777);
    CHECK_HEX_CONST(7ffffffff);
    CHECK_OCT_CONST(0400000000000);
    CHECK_HEX_CONST(800000000);
    CHECK_OCT_CONST(0777777777777);
    CHECK_HEX_CONST(fffffffff);
    CHECK_OCT_CONST(01000000000000);
    CHECK_HEX_CONST(1000000000);
    CHECK_OCT_CONST(01777777777777);
    CHECK_HEX_CONST(1fffffffff);
    CHECK_OCT_CONST(02000000000000);
    CHECK_HEX_CONST(2000000000);
    CHECK_OCT_CONST(03777777777777);
    CHECK_HEX_CONST(3fffffffff);
    CHECK_OCT_CONST(04000000000000);
    CHECK_HEX_CONST(4000000000);
    CHECK_OCT_CONST(07777777777777);
    CHECK_HEX_CONST(7fffffffff);
    CHECK_OCT_CONST(010000000000000);
    CHECK_HEX_CONST(8000000000);
    CHECK_OCT_CONST(017777777777777);
    CHECK_HEX_CONST(ffffffffff);
    CHECK_OCT_CONST(020000000000000);
    CHECK_HEX_CONST(10000000000);
    CHECK_OCT_CONST(037777777777777);
    CHECK_HEX_CONST(1ffffffffff);
    CHECK_OCT_CONST(040000000000000);
    CHECK_HEX_CONST(20000000000);
    CHECK_OCT_CONST(077777777777777);
    CHECK_HEX_CONST(3ffffffffff);
    CHECK_OCT_CONST(0100000000000000);
    CHECK_HEX_CONST(40000000000);
    CHECK_OCT_CONST(0177777777777777);
    CHECK_HEX_CONST(7ffffffffff);
    CHECK_OCT_CONST(0200000000000000);
    CHECK_HEX_CONST(80000000000);
    CHECK_OCT_CONST(0377777777777777);
    CHECK_HEX_CONST(fffffffffff);
    CHECK_OCT_CONST(0400000000000000);
    CHECK_HEX_CONST(100000000000);
    CHECK_OCT_CONST(0777777777777777);
    CHECK_HEX_CONST(1fffffffffff);
    CHECK_OCT_CONST(01000000000000000);
    CHECK_HEX_CONST(200000000000);
    CHECK_OCT_CONST(01777777777777777);
    CHECK_HEX_CONST(3fffffffffff);
    CHECK_OCT_CONST(02000000000000000);
    CHECK_HEX_CONST(400000000000);
    CHECK_OCT_CONST(03777777777777777);
    CHECK_HEX_CONST(7fffffffffff);
    CHECK_OCT_CONST(04000000000000000);
    CHECK_HEX_CONST(800000000000);
    CHECK_OCT_CONST(07777777777777777);
    CHECK_HEX_CONST(ffffffffffff);
    CHECK_OCT_CONST(010000000000000000);
    CHECK_HEX_CONST(1000000000000);
    CHECK_OCT_CONST(017777777777777777);
    CHECK_HEX_CONST(1ffffffffffff);
    CHECK_OCT_CONST(020000000000000000);
    CHECK_HEX_CONST(2000000000000);
    CHECK_OCT_CONST(037777777777777777);
    CHECK_HEX_CONST(3ffffffffffff);
    CHECK_OCT_CONST(040000000000000000);
    CHECK_HEX_CONST(4000000000000);
    CHECK_OCT_CONST(077777777777777777);
    CHECK_HEX_CONST(7ffffffffffff);
    CHECK_OCT_CONST(0100000000000000000);
    CHECK_HEX_CONST(8000000000000);
    CHECK_OCT_CONST(0177777777777777777);
    CHECK_HEX_CONST(fffffffffffff);
    CHECK_OCT_CONST(0200000000000000000);
    CHECK_HEX_CONST(10000000000000);
    CHECK_OCT_CONST(0377777777777777777);
    CHECK_HEX_CONST(1fffffffffffff);
    CHECK_OCT_CONST(0400000000000000000);
    CHECK_HEX_CONST(20000000000000);
    CHECK_OCT_CONST(0777777777777777777);
    CHECK_HEX_CONST(3fffffffffffff);
    CHECK_OCT_CONST(01000000000000000000);
    CHECK_HEX_CONST(40000000000000);
    CHECK_OCT_CONST(01777777777777777777);
    CHECK_HEX_CONST(7fffffffffffff);
    CHECK_OCT_CONST(02000000000000000000);
    CHECK_HEX_CONST(80000000000000);
    CHECK_OCT_CONST(03777777777777777777);
    CHECK_HEX_CONST(ffffffffffffff);
    CHECK_OCT_CONST(04000000000000000000);
    CHECK_HEX_CONST(100000000000000);
    CHECK_OCT_CONST(07777777777777777777);
    CHECK_HEX_CONST(1ffffffffffffff);
    CHECK_OCT_CONST(010000000000000000000);
    CHECK_HEX_CONST(200000000000000);
    CHECK_OCT_CONST(017777777777777777777);
    CHECK_HEX_CONST(3ffffffffffffff);
    CHECK_OCT_CONST(020000000000000000000);
    CHECK_HEX_CONST(400000000000000);
    CHECK_OCT_CONST(037777777777777777777);
    CHECK_HEX_CONST(7ffffffffffffff);
    CHECK_OCT_CONST(040000000000000000000);
    CHECK_HEX_CONST(800000000000000);
    CHECK_OCT_CONST(077777777777777777777);
    CHECK_HEX_CONST(fffffffffffffff);
    CHECK_OCT_CONST(0100000000000000000000);
    CHECK_HEX_CONST(1000000000000000);
    CHECK_OCT_CONST(0177777777777777777777);
    CHECK_HEX_CONST(1fffffffffffffff);
    CHECK_OCT_CONST(0200000000000000000000);
    CHECK_HEX_CONST(2000000000000000);
    CHECK_OCT_CONST(0377777777777777777777);
    CHECK_HEX_CONST(3fffffffffffffff);
    CHECK_OCT_CONST(0400000000000000000000);
    CHECK_HEX_CONST(4000000000000000);
    CHECK_OCT_CONST(0777777777777777777777);
    CHECK_HEX_CONST(7fffffffffffffff);
    CHECK_OCT_CONST(01000000000000000000000);
    CHECK_HEX_CONST(8000000000000000);
    CHECK_OCT_CONST(01777777777777777777777);
    CHECK_HEX_CONST(ffffffffffffffff);

    CHECK_BIN_CONST(1);
    CHECK_BIN_CONST(10);
    CHECK_BIN_CONST(11);
    CHECK_BIN_CONST(100);
    CHECK_BIN_CONST(111);
    CHECK_BIN_CONST(1000);
    CHECK_BIN_CONST(1111);
    CHECK_BIN_CONST(10000);
    CHECK_BIN_CONST(11111);
    CHECK_BIN_CONST(100000);
    CHECK_BIN_CONST(111111);
    CHECK_BIN_CONST(1000000);
    CHECK_BIN_CONST(1111111);
    CHECK_BIN_CONST(10000000);
    CHECK_BIN_CONST(11111111);
    CHECK_BIN_CONST(100000000);
    CHECK_BIN_CONST(111111111);
    CHECK_BIN_CONST(1000000000);
    CHECK_BIN_CONST(1111111111);
    CHECK_BIN_CONST(10000000000);
    CHECK_BIN_CONST(11111111111);
    CHECK_BIN_CONST(100000000000);
    CHECK_BIN_CONST(111111111111);
    CHECK_BIN_CONST(1000000000000);
    CHECK_BIN_CONST(1111111111111);
    CHECK_BIN_CONST(10000000000000);
    CHECK_BIN_CONST(11111111111111);
    CHECK_BIN_CONST(100000000000000);
    CHECK_BIN_CONST(111111111111111);
    CHECK_BIN_CONST(1000000000000000);
    CHECK_BIN_CONST(1111111111111111);
    CHECK_BIN_CONST(10000000000000000);
    CHECK_BIN_CONST(11111111111111111);
    CHECK_BIN_CONST(100000000000000000);
    CHECK_BIN_CONST(111111111111111111);
    CHECK_BIN_CONST(1000000000000000000);
    CHECK_BIN_CONST(1111111111111111111);
    CHECK_BIN_CONST(10000000000000000000);
    CHECK_BIN_CONST(11111111111111111111);
    CHECK_BIN_CONST(100000000000000000000);
    CHECK_BIN_CONST(111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(10000000000000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(11111111111111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(100000000000000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(111111111111111111111111111111111111111111111111111111111111111);
    CHECK_BIN_CONST(1000000000000000000000000000000000000000000000000000000000000000);
    CHECK_BIN_CONST(1111111111111111111111111111111111111111111111111111111111111111);

    EXCEPT_INTEGER_EQ(tok, 0xbbbb, "0xbbbb");
    EXCEPT_INTEGER_EQ(tok, 0xf, "0b1111");
    EXCEPT_INTEGER_EQ(tok, 0, "0");
    EXCEPT_INTEGER_EQ(tok, 0, "0LL");
    EXCEPT_INTEGER_NEQ(tok, 0, "0b1234");

    token_destroy(tok);
    diag_destroy(diag);
}

static
void test_number2()
{
    diag_t diag;
    struct option_s option;
    token_t tok;

    diag = diag_create();
    tok = token_create();

    tok->type = TOKEN_NUMBER;

    CHECK_HEX_CONST(fful);
    CHECK_HEX_CONST(ffull);
    CHECK_HEX_CONST(ffllu);
    
    tok->cs = cstring_cpy_n(tok->cs, "0xFFFFFFFFFFFFFFFFFFFFull", strlen("0xFFFFFFFFFFFFFFFFFFFFull"));
    parse_number(diag, &option, tok);
    printf("%llu\n", tok->number.ul);
    CHECK_DEP_CONST(123456, "12'3'4'56");
    CHECK_DEP_CONST(123456, "12'3'4'56'");

    token_destroy(tok);
    diag_destroy(diag);
}

int main(void)
{
#ifdef WIN32
    _CrtSetDbgFlag(_CrtSetDbgFlag(_CRTDBG_REPORT_FLAG) | _CRTDBG_LEAK_CHECK_DF);
#endif

    test_number1();
    test_number2();
    TEST_REPORT();
    return 0;
}
